{
  "id": "react",
  "name": "React",
  "description": "Preset para SPA React/Vite/CRA con exports Selenium y metadata.",
  "templateDir": "../selenium/template",
  "detection": {
    "requiredFiles": [
      "**/src/App.tsx"
    ],
    "maxDepth": 3
  },
  "contextFiles": [
    {
      "label": "\uD83D\uDCC4 Selenium Test Context",
      "description": "Resumen generado por bootstrap",
      "relativePath": "agent/exports/selenium_test_context.md"
    },
    {
      "label": "\uD83D\uDCDD Notas del agente",
      "description": "Bit\u00E1cora viva (AGENT_NOTES) con decisiones y formularios clave",
      "relativePath": "agent/notes/AGENT_NOTES.md"
    },
    {
      "label": "\uD83D\uDCDD Notas Selenium Agent",
      "description": "Checklist operativo",
      "relativePath": "agent/notes/selenium-agent.md"
    },
    {
      "label": "\uD83D\uDCDA Documentaci\u00F3n General",
      "description": "Punto de partida del repositorio",
      "relativePath": "DOCUMENTACION.md"
    },
    {
      "label": "\uD83D\uDDFC\uFE0F Project Metadata",
      "description": "Resultado del comando Escanear Proyecto",
      "relativePath": "agent/exports/project_metadata.json"
    }
  ],
  "data": {
    "bootstrapScript": "agent/bootstrap.sh",
    "snippetSource": "agent/scripts/export_selenium_context.mjs",
    "composerData": "agent/exports/composer_deps.json",
    "deptracFile": "agent/exports/deptrac_layers.json"
  },
  "watchFiles": [
    "agent/bootstrap.sh",
    "agent/exports/selenium_test_context.md",
    "agent/notes/AGENT_NOTES.md",
    "agent/notes/selenium-agent.md",
    "agent/exports/composer_deps.json",
    "agent/exports/deptrac_layers.json",
    "agent/scripts/export_selenium_context.mjs",
    "agent/exports/project_metadata.json"
  ],
  "tasks": [
    {
      "command": "agent.runBootstrap",
      "label": "Ejecutar ./agent/bootstrap.sh",
      "primary": true
    },
    {
      "command": "agent.runSeleniumExport",
      "label": "Exportar contexto Selenium"
    },
    {
      "command": "agent.runDeptrac",
      "label": "Ejecutar an\u00E1lisis Deptrac"
    }
  ],
  "commands": {
    "agent.runBootstrap": {
      "commands": [
        "chmod +x ./agent/bootstrap.sh",
        "./agent/bootstrap.sh"
      ],
      "announce": "Ejecutando ./agent/bootstrap.sh en la terminal Agent Toolkit\u2026"
    },
    "agent.runSeleniumExport": {
      "commands": [
        "node agent/scripts/export_selenium_context.mjs"
      ],
      "announce": "Exportando contexto Selenium\u2026",
      "invalidateSnippets": true
    },
    "agent.runDeptrac": {
      "commands": [
        "chmod +x ./agent/scripts/run_deptrac.sh",
        "./agent/scripts/run_deptrac.sh"
      ],
      "announce": "Ejecutando an\u00E1lisis Deptrac\u2026"
    }
  },
  "defaultSnippets": [
    {
      "label": "selenium:page-object",
      "detail": "Plantilla Page Object",
      "language": "javascript",
      "insertText": "import { By } from 'selenium-webdriver';\n\nexport class ${1:PageName}Page {\n  constructor(driver) {\n    this.driver = driver;\n  }\n\n  async goto() {\n    await this.driver.get('${2:/ruta}');\n  }\n\n  async ${3:submitForm}(data) {\n    await this.driver.findElement(By.css('${4:#selector}')).sendKeys(data);\n    await this.driver.findElement(By.css('button[type=\"submit\"]')).click();\n  }\n}"
    },
    {
      "label": "selenium:test-case",
      "detail": "Test Jest/Mocha b\u00E1sico",
      "language": "typescript",
      "insertText": "import { Builder } from 'selenium-webdriver';\n\ndescribe('${1:Feature}', () => {\n  let driver;\n\n  beforeAll(async () => {\n    driver = await new Builder().forBrowser('chrome').build();\n  }, 30000);\n\n  afterAll(async () => {\n    if (driver) {\n      await driver.quit();\n    }\n  });\n\n  it('deber\u00EDa ${2:realizar la acci\u00F3n}', async () => {\n    // TODO: usa Page Objects del contexto\n  });\n});"
    },
    {
      "label": "selenium:php-test",
      "detail": "Test PHP PHPUnit",
      "language": "php",
      "insertText": "<?php\nuse Facebook\\WebDriver\\Remote\\RemoteWebDriver;\n\nclass ${1:LoginTest} extends TestCase\n{\n    /** @var RemoteWebDriver */\n    private $driver;\n\n    protected function setUp(): void\n    {\n        $this->driver = RemoteWebDriver::create('${2:http://localhost:4444/wd/hub}', DesiredCapabilities::chrome());\n    }\n\n    protected function tearDown(): void\n    {\n        $this->driver->quit();\n    }\n\n    public function test${3:LoginCorrecto}(): void\n    {\n        $this->driver->get('${4:/ruta}');\n    }\n}"
    }
  ]
}
